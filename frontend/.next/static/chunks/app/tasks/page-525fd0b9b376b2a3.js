(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[147],{74217:(e,s,a)=>{"use strict";a.d(s,{Ix:()=>i,W6:()=>c,XN:()=>t,e1:()=>l,gG:()=>r,wP:()=>n});var t=function(e){return e.NEW="NEW",e.ENRICHED="ENRICHED",e.VALIDATED="VALIDATED",e.PRIORITIZED="PRIORITIZED",e.CONTACTED="CONTACTED",e.CONVERTED="CONVERTED",e.LOST="LOST",e}({}),r=function(e){return e.ADMIN="ADMIN",e.MANAGER="MANAGER",e.USER="USER",e.VIEWER="VIEWER",e}({}),l=function(e){return e.PENDING="PENDING",e.IN_PROGRESS="IN_PROGRESS",e.COMPLETED="COMPLETED",e.CANCELLED="CANCELLED",e.APPROVED="APPROVED",e.REJECTED="REJECTED",e}({}),i=function(e){return e.PROSPECTING="PROSPECTING",e.EMAIL="EMAIL",e.CALL="CALL",e.MEETING="MEETING",e.FOLLOW_UP="FOLLOW_UP",e.RESEARCH="RESEARCH",e.PROPOSAL="PROPOSAL",e.NEGOTIATION="NEGOTIATION",e.CLOSING="CLOSING",e.CUSTOM="CUSTOM",e}({}),n=function(e){return e.MANUAL="MANUAL",e.AUTOMATED="AUTOMATED",e.TEMPLATE="TEMPLATE",e.AI_GENERATED="AI_GENERATED",e.EMAIL="EMAIL",e.CALL="CALL",e.MEETING="MEETING",e.LINKEDIN_MESSAGE="LINKEDIN_MESSAGE",e.WHATSAPP="WHATSAPP",e.PROPOSAL="PROPOSAL",e.DEMO="DEMO",e.FOLLOW_UP="FOLLOW_UP",e.REMINDER="REMINDER",e.NOTE="NOTE",e.RESEARCH="RESEARCH",e}({}),c=function(e){return e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.URGENT="URGENT",e.CRITICAL="CRITICAL",e}({})},87347:(e,s,a)=>{Promise.resolve().then(a.bind(a,92842))},92842:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>G});var t=a(95155),r=a(12115),l=a(74217);let i=()=>{let[e,s]=(0,r.useState)([]),[a,t]=(0,r.useState)(!1),[i,n]=(0,r.useState)(null),[c,d]=(0,r.useState)({total:0,pages:0,currentPage:1,hasMore:!1}),[o,x]=(0,r.useState)({}),[m,u]=(0,r.useState)([]),h=(0,r.useCallback)((e,s)=>{let a=new URLSearchParams;return e.status&&a.append("status",e.status.join(",")),e.category&&a.append("category",e.category.join(",")),e.type&&a.append("type",e.type.join(",")),e.priority&&a.append("priority",e.priority.join(",")),e.assignedTo&&a.append("assignedTo",e.assignedTo),e.dateFrom&&a.append("dateFrom",e.dateFrom.toISOString()),e.dateTo&&a.append("dateTo",e.dateTo.toISOString()),e.syncStatus&&a.append("syncStatus",e.syncStatus),e.searchTerm&&a.append("search",e.searchTerm),a.append("page",s.toString()),a.append("limit","20"),a.toString()},[]),p=(0,r.useCallback)(async(e,a)=>{try{t(!0),n(null);let r=h(e,a),l=await fetch("/api/tasks?".concat(r));if(!l.ok)throw Error("HTTP error! status: ".concat(l.status));let i=await l.json();if(i.success)s(i.data),d(i.pagination);else throw Error(i.error||"Failed to fetch tasks")}catch(e){n(e instanceof Error?e.message:"An error occurred")}finally{t(!1)}},[h]);(0,r.useEffect)(()=>{p(o,c.currentPage)},[o,c.currentPage]);let g=async e=>{try{let a=await fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));let t=await a.json();if(t.success){let e=h(o,c.currentPage),a=await fetch("/api/tasks?".concat(e));if(a.ok){let e=await a.json();e.success&&(s(e.data),d(e.pagination))}return t.data}throw Error(t.error||"Failed to create task")}catch(s){let e=s instanceof Error?s.message:"An error occurred";throw n(e),Error(e)}},b=async(e,a)=>{try{let t=await fetch("/api/tasks/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let r=await t.json();if(r.success)return s(s=>s.map(s=>s.id===e?r.data:s)),r.data;throw Error(r.error||"Failed to update task")}catch(s){let e=s instanceof Error?s.message:"An error occurred";throw n(e),Error(e)}},j=async e=>{try{let a=await fetch("/api/tasks/".concat(e),{method:"DELETE"});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));let t=await a.json();if(t.success)s(s=>s.filter(s=>s.id!==e)),u(s=>s.filter(s=>s!==e));else throw Error(t.error||"Failed to delete task")}catch(s){let e=s instanceof Error?s.message:"An error occurred";throw n(e),Error(e)}},N=async e=>{try{let a=await fetch("/api/tasks/actions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"approve",taskId:e})});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));let t=await a.json();if(t.success)s(s=>s.map(s=>s.id===e?{...s,status:l.e1.APPROVED}:s));else throw Error(t.error||"Failed to approve task")}catch(s){let e=s instanceof Error?s.message:"An error occurred";throw n(e),Error(e)}},y=async(e,a)=>{try{let t=await fetch("/api/tasks/actions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"reject",taskId:e,reason:a})});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let r=await t.json();if(r.success)s(s=>s.map(s=>s.id===e?{...s,status:l.e1.REJECTED,rejectedReason:a}:s));else throw Error(r.error||"Failed to reject task")}catch(s){let e=s instanceof Error?s.message:"An error occurred";throw n(e),Error(e)}},f=async e=>{try{let a=await fetch("/api/tasks/actions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"sync",taskId:e})});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));let t=await a.json();if(t.success)s(s=>s.map(s=>s.id===e?{...s,syncedToHubspot:!0,syncedAt:new Date}:s));else throw Error(t.error||"Failed to sync to HubSpot")}catch(s){let e=s instanceof Error?s.message:"An error occurred";throw n(e),Error(e)}},v=async(e,a)=>{try{let t=await fetch("/api/tasks/actions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"bulk",taskIds:m,bulkAction:e,...a})});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let r=await t.json();if(r.success){let e=h(o,c.currentPage),a=await fetch("/api/tasks?".concat(e));if(a.ok){let e=await a.json();e.success&&(s(e.data),d(e.pagination))}u([])}else throw Error(r.error||"Failed to perform bulk action")}catch(s){let e=s instanceof Error?s.message:"An error occurred";throw n(e),Error(e)}},w=async e=>{try{let s=await fetch("/api/tasks/ai-suggestions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));let a=await s.json();if(a.success)return a.data;throw Error(a.error||"Failed to generate AI suggestions")}catch(s){let e=s instanceof Error?s.message:"An error occurred";throw n(e),Error(e)}},E=(0,r.useCallback)(async()=>{let e=h(o,c.currentPage);try{t(!0),n(null);let a=await fetch("/api/tasks?".concat(e));if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));let r=await a.json();if(r.success)s(r.data),d(r.pagination);else throw Error(r.error||"Failed to fetch tasks")}catch(e){n(e instanceof Error?e.message:"An error occurred")}finally{t(!1)}},[h,o,c.currentPage]);return{tasks:e,loading:a,error:i,pagination:c,filters:o,selectedTasks:m,createTask:g,updateTask:b,deleteTask:j,setFilters:e=>{x(e),d(e=>({...e,currentPage:1}))},setPage:e=>{d(s=>({...s,currentPage:e}))},refreshTasks:E,selectTask:e=>{u(s=>[...s,e])},deselectTask:e=>{u(s=>s.filter(s=>s!==e))},selectAllTasks:()=>{u(e.map(e=>e.id))},deselectAllTasks:()=>{u([])},approveTask:N,rejectTask:y,syncToHubSpot:f,bulkAction:v,generateAISuggestions:w}};var n=a(16785),c=a(71539),d=a(81497),o=a(49376),x=a(84616),m=a(13717),u=a(40646),h=a(12486),p=a(47924),g=a(66932),b=a(72713),j=a(92657),N=a(62525),y=a(28883),f=a(19420),v=a(69074),w=a(54416),E=a(71007),A=a(48136),C=a(14186),T=a(53311);let k={subject:"",description:"",category:l.Ix.PROSPECTING,type:l.wP.EMAIL,priority:l.W6.MEDIUM,contactEmail:"",contactName:"",companyName:"",scheduledDate:"",scheduledTime:"",estimatedDuration:30,customMessage:""};function S(e){let{isOpen:s,onClose:a,onCreate:i,onGenerateAI:n}=e,[x,m]=(0,r.useState)(k),[u,h]=(0,r.useState)(null),[p,g]=(0,r.useState)(!1),[b,j]=(0,r.useState)(!1),[N,S]=(0,r.useState)({}),[D,P]=(0,r.useState)(1);(0,r.useEffect)(()=>{s&&(m(k),h(null),S({}),P(1))},[s]);let I=()=>{let e={};return x.subject.trim()||(e.subject="El asunto es requerido"),x.contactEmail.trim()||(e.contactEmail="El email es requerido"),x.contactName.trim()||(e.contactName="El nombre es requerido"),x.companyName.trim()||(e.companyName="La empresa es requerida"),x.contactEmail&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x.contactEmail)&&(e.contactEmail="Email inv\xe1lido"),S(e),0===Object.keys(e).length},O=async()=>{if(I()){g(!0);try{let e=await n(x);h(e),P(2)}catch(e){console.error("Error generating AI suggestions:",e)}finally{g(!1)}}},M=async()=>{if(I()){j(!0);try{let e={...x,scheduledDate:x.scheduledDate?new Date(x.scheduledDate):void 0,...u&&{aiGeneratedEmail:u.emailTemplate,aiGeneratedScript:u.callScript,aiGeneratedComment:u.comment}};await i(e),a()}catch(e){console.error("Error creating task:",e)}finally{j(!1)}}},R=(e,s)=>{m(a=>({...a,[e]:s})),N[e]&&S(s=>({...s,[e]:null}))},L=e=>{switch(e){case l.wP.EMAIL:return(0,t.jsx)(y.A,{className:"w-4 h-4"});case l.wP.CALL:return(0,t.jsx)(f.A,{className:"w-4 h-4"});case l.wP.MEETING:return(0,t.jsx)(v.A,{className:"w-4 h-4"});case l.wP.LINKEDIN_MESSAGE:default:return(0,t.jsx)(d.A,{className:"w-4 h-4"})}},G=e=>{switch(e){case l.W6.LOW:return"bg-blue-100 text-blue-800 border-blue-200";case l.W6.MEDIUM:return"bg-yellow-100 text-yellow-800 border-yellow-200";case l.W6.HIGH:return"bg-orange-100 text-orange-800 border-orange-200";case l.W6.URGENT:return"bg-red-100 text-red-800 border-red-200";case l.W6.CRITICAL:return"bg-red-200 text-red-900 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return s?(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-purple-50",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg",children:(0,t.jsx)(c.A,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Crear Nueva Tarea"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Paso ",D," de 3 - ",1===D?"Informaci\xf3n b\xe1sica":2===D?"Sugerencias de IA":"Revisi\xf3n final"]})]})]}),(0,t.jsx)("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,t.jsx)(w.A,{className:"w-6 h-6 text-gray-500"})})]}),(0,t.jsx)("div",{className:"px-6 py-2 bg-gray-50",children:(0,t.jsx)("div",{className:"flex items-center space-x-2",children:[1,2,3].map(e=>(0,t.jsxs)(r.Fragment,{children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium ".concat(e<=D?"bg-blue-600 text-white":"bg-gray-200 text-gray-500"),children:e}),e<3&&(0,t.jsx)("div",{className:"flex-1 h-2 rounded ".concat(e<D?"bg-blue-600":"bg-gray-200")})]},e))})}),(0,t.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[1===D&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Tipo de Tarea"}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.values(l.wP).map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>R("type",e),className:"p-3 rounded-lg border-2 transition-all ".concat(x.type===e?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700"),children:(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[L(e),(0,t.jsx)("span",{className:"text-xs font-medium",children:e.replace("_"," ")})]})},e))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categor\xeda"}),(0,t.jsx)("select",{value:x.category,onChange:e=>R("category",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Object.values(l.Ix).map(e=>(0,t.jsx)("option",{value:e,children:e.replace("_"," ")},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridad"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:Object.values(l.W6).map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>R("priority",e),className:"px-3 py-2 text-xs font-medium rounded-lg border transition-all ".concat(x.priority===e?G(e):"bg-gray-100 text-gray-600 border-gray-200 hover:bg-gray-200"),children:e},e))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Asunto *"}),(0,t.jsx)("input",{type:"text",value:x.subject,onChange:e=>R("subject",e.target.value),placeholder:"Ej: Seguimiento de propuesta comercial",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(N.subject?"border-red-300":"border-gray-300")}),N.subject&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.subject})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripci\xf3n"}),(0,t.jsx)("textarea",{value:x.description,onChange:e=>R("description",e.target.value),placeholder:"Descripci\xf3n detallada de la tarea...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(E.A,{className:"w-4 h-4 inline mr-1"}),"Nombre del Contacto *"]}),(0,t.jsx)("input",{type:"text",value:x.contactName,onChange:e=>R("contactName",e.target.value),placeholder:"Juan P\xe9rez",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(N.contactName?"border-red-300":"border-gray-300")}),N.contactName&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.contactName})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(y.A,{className:"w-4 h-4 inline mr-1"}),"Email del Contacto *"]}),(0,t.jsx)("input",{type:"email",value:x.contactEmail,onChange:e=>R("contactEmail",e.target.value),placeholder:"juan@empresa.com",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(N.contactEmail?"border-red-300":"border-gray-300")}),N.contactEmail&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.contactEmail})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(A.A,{className:"w-4 h-4 inline mr-1"}),"Empresa *"]}),(0,t.jsx)("input",{type:"text",value:x.companyName,onChange:e=>R("companyName",e.target.value),placeholder:"Acme Corp",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(N.companyName?"border-red-300":"border-gray-300")}),N.companyName&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.companyName})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(v.A,{className:"w-4 h-4 inline mr-1"}),"Fecha Programada"]}),(0,t.jsx)("input",{type:"date",value:x.scheduledDate,onChange:e=>R("scheduledDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(C.A,{className:"w-4 h-4 inline mr-1"}),"Hora"]}),(0,t.jsx)("input",{type:"time",value:x.scheduledTime,onChange:e=>R("scheduledTime",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duraci\xf3n (min)"}),(0,t.jsxs)("select",{value:x.estimatedDuration,onChange:e=>R("estimatedDuration",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:15,children:"15 min"}),(0,t.jsx)("option",{value:30,children:"30 min"}),(0,t.jsx)("option",{value:45,children:"45 min"}),(0,t.jsx)("option",{value:60,children:"1 hora"}),(0,t.jsx)("option",{value:120,children:"2 horas"})]})]})]})]}),2===D&&u&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-lg border border-purple-200",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,t.jsx)(T.A,{className:"w-6 h-6 text-purple-600"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-purple-900",children:"Sugerencias de IA"}),(0,t.jsxs)("div",{className:"px-3 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-full",children:[Math.round(100*u.successProbability),"% \xe9xito"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"\uD83D\uDCE7 Email Generado"}),(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg border text-sm",children:(0,t.jsx)("div",{className:"whitespace-pre-wrap",children:u.emailTemplate})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"\uD83D\uDCDE Script de Llamada"}),(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg border text-sm",children:(0,t.jsx)("div",{className:"whitespace-pre-wrap",children:u.callScript})})]})]}),(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white p-3 rounded-lg border",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"Mejor momento"}),(0,t.jsxs)("div",{className:"font-medium",children:[u.bestDay," ",u.bestTime]})]}),(0,t.jsxs)("div",{className:"bg-white p-3 rounded-lg border",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"Probabilidad"}),(0,t.jsxs)("div",{className:"font-medium text-green-600",children:[Math.round(100*u.successProbability),"%"]})]}),(0,t.jsxs)("div",{className:"bg-white p-3 rounded-lg border",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"Comentario CRM"}),(0,t.jsx)("div",{className:"font-medium text-sm",children:u.comment})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mensaje Personalizado (opcional)"}),(0,t.jsx)("textarea",{value:x.customMessage,onChange:e=>R("customMessage",e.target.value),placeholder:"Sobrescribe el mensaje generado por IA...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Si dejas esto vac\xedo, se usar\xe1 el contenido generado por IA"})]})]}),3===D&&(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"bg-green-50 p-6 rounded-lg border border-green-200",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-green-900 mb-4",children:"Revisi\xf3n Final"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Informaci\xf3n de la Tarea"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Tipo:"})," ",x.type.replace("_"," ")]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Categor\xeda:"})," ",x.category.replace("_"," ")]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Prioridad:"})," ",x.priority]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Asunto:"})," ",x.subject]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Informaci\xf3n del Contacto"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Nombre:"})," ",x.contactName]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Email:"})," ",x.contactEmail]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Empresa:"})," ",x.companyName]})]})]})]}),(x.scheduledDate||x.scheduledTime)&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Programaci\xf3n"}),(0,t.jsxs)("div",{className:"text-sm",children:[x.scheduledDate&&(0,t.jsxs)("span",{children:["\uD83D\uDCC5 ",new Date(x.scheduledDate).toLocaleDateString()]}),x.scheduledTime&&(0,t.jsxs)("span",{className:"ml-4",children:["\uD83D\uDD50 ",x.scheduledTime]}),(0,t.jsxs)("span",{className:"ml-4",children:["⏱️ ",x.estimatedDuration," minutos"]})]})]})]})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[(0,t.jsx)("div",{className:"flex space-x-3",children:D>1&&(0,t.jsx)("button",{onClick:()=>P(D-1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Anterior"})}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)("button",{onClick:a,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),1===D&&(0,t.jsxs)("button",{onClick:O,disabled:p,className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[p?(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):(0,t.jsx)(o.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:p?"Generando...":"Generar con IA"})]}),2===D&&(0,t.jsx)("button",{onClick:()=>P(3),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Revisar"}),3===D&&(0,t.jsxs)("button",{onClick:M,disabled:b,className:"flex items-center space-x-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[b?(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):(0,t.jsx)(c.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:b?"Creando...":"Crear Tarea"})]})]})]})]})}):null}var D=a(29676),P=a(54861),I=a(85339);function O(e){var s;let{task:a,isOpen:i,onClose:n,onUpdate:x,onApprove:p,onReject:g,onSync:b}=e,[j,N]=(0,r.useState)(!1),[T,k]=(0,r.useState)({}),[S,O]=(0,r.useState)(""),[M,R]=(0,r.useState)(!1),[L,G]=(0,r.useState)(!1),[z,H]=(0,r.useState)("details");if((0,r.useEffect)(()=>{a&&i&&(k({subject:a.subject,description:a.description||"",customMessage:a.customMessage||"",scheduledDate:a.scheduledDate?new Date(a.scheduledDate).toISOString().split("T")[0]:"",scheduledTime:a.scheduledTime||"",estimatedDuration:a.estimatedDuration}),N(!1),H("details"))},[a,i]),!i||!a)return null;let _=async()=>{G(!0);try{await x(a.id,T),N(!1)}catch(e){console.error("Error updating task:",error)}finally{G(!1)}},U=async()=>{G(!0);try{await p(a.id)}catch(e){console.error("Error approving task:",error)}finally{G(!1)}},F=async()=>{if(S.trim()){G(!0);try{await g(a.id,S),R(!1),O("")}catch(e){console.error("Error rejecting task:",error)}finally{G(!1)}}},W=async()=>{G(!0);try{await b(a.id)}catch(e){console.error("Error syncing task:",error)}finally{G(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-purple-50",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg text-white",children:(e=>{switch(e){case"EMAIL":return(0,t.jsx)(y.A,{className:"w-4 h-4"});case"CALL":return(0,t.jsx)(f.A,{className:"w-4 h-4"});case"MEETING":return(0,t.jsx)(v.A,{className:"w-4 h-4"});default:return(0,t.jsx)(d.A,{className:"w-4 h-4"})}})(a.type)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:a.subject}),(0,t.jsxs)("div",{className:"flex items-center space-x-3 mt-1",children:[(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full border ".concat((e=>{switch(e){case l.e1.DRAFT:return"bg-gray-100 text-gray-800 border-gray-200";case l.e1.PENDING_APPROVAL:return"bg-yellow-100 text-yellow-800 border-yellow-200";case l.e1.APPROVED:return"bg-green-100 text-green-800 border-green-200";case l.e1.REJECTED:return"bg-red-100 text-red-800 border-red-200";case l.e1.SCHEDULED:return"bg-blue-100 text-blue-800 border-blue-200";case l.e1.COMPLETED:return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(a.status)),children:a.status.replace("_"," ")}),(0,t.jsx)("span",{className:"text-sm font-medium ".concat((e=>{switch(e){case l.W6.LOW:return"text-blue-600";case l.W6.MEDIUM:return"text-yellow-600";case l.W6.HIGH:return"text-orange-600";case l.W6.URGENT:return"text-red-600";case l.W6.CRITICAL:return"text-red-800";default:return"text-gray-600"}})(a.priority)),children:a.priority}),a.syncedToHubspot&&(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"✓ Sincronizado"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[!j&&(0,t.jsx)("button",{onClick:()=>N(!0),className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",children:(0,t.jsx)(m.A,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:n,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",children:(0,t.jsx)(w.A,{className:"w-6 h-6"})})]})]}),(0,t.jsxs)("div",{className:"flex border-b border-gray-200",children:[(0,t.jsx)("button",{onClick:()=>H("details"),className:"px-6 py-3 font-medium text-sm border-b-2 transition-colors ".concat("details"===z?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Detalles"}),(0,t.jsxs)("button",{onClick:()=>H("ai"),className:"px-6 py-3 font-medium text-sm border-b-2 transition-colors ".concat("ai"===z?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,t.jsx)(o.A,{className:"w-4 h-4 inline mr-1"}),"IA & Contenido"]}),(0,t.jsxs)("button",{onClick:()=>H("timeline"),className:"px-6 py-3 font-medium text-sm border-b-2 transition-colors ".concat("timeline"===z?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,t.jsx)(D.A,{className:"w-4 h-4 inline mr-1"}),"Timeline"]})]}),(0,t.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-300px)]",children:["details"===z&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informaci\xf3n de la Tarea"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asunto"}),j?(0,t.jsx)("input",{type:"text",value:T.subject,onChange:e=>k({...T,subject:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):(0,t.jsx)("p",{className:"text-gray-900",children:a.subject})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n"}),j?(0,t.jsx)("textarea",{value:T.description,onChange:e=>k({...T,description:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):(0,t.jsx)("p",{className:"text-gray-700",children:a.description||"Sin descripci\xf3n"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),(0,t.jsx)("p",{className:"text-gray-900",children:a.type.replace("_"," ")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categor\xeda"}),(0,t.jsx)("p",{className:"text-gray-900",children:a.category.replace("_"," ")})]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informaci\xf3n del Contacto"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(E.A,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-gray-700",children:a.contactName})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(y.A,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-gray-700",children:a.contactEmail})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(A.A,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-gray-700",children:a.companyName})]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Programaci\xf3n"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha"}),j?(0,t.jsx)("input",{type:"date",value:T.scheduledDate,onChange:e=>k({...T,scheduledDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.A,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-gray-700",children:(s=a.scheduledDate)?new Date(s).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"No programada"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora"}),j?(0,t.jsx)("input",{type:"time",value:T.scheduledTime,onChange:e=>k({...T,scheduledTime:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(C.A,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-gray-700",children:a.scheduledTime||"No especificada"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duraci\xf3n"}),j?(0,t.jsxs)("select",{value:T.estimatedDuration,onChange:e=>k({...T,estimatedDuration:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:15,children:"15 min"}),(0,t.jsx)("option",{value:30,children:"30 min"}),(0,t.jsx)("option",{value:45,children:"45 min"}),(0,t.jsx)("option",{value:60,children:"1 hora"}),(0,t.jsx)("option",{value:120,children:"2 horas"})]}):(0,t.jsxs)("span",{className:"text-gray-700",children:[a.estimatedDuration," minutos"]})]})]})]}),a.successProbability&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"AI Insights"}),(0,t.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-purple-900",children:"Probabilidad de \xc9xito"}),(0,t.jsxs)("span",{className:"text-lg font-bold text-purple-700",children:[Math.round(100*a.successProbability),"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-purple-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-1000",style:{width:"".concat(100*a.successProbability,"%")}})}),a.bestContactDay&&a.bestContactTime&&(0,t.jsxs)("div",{className:"mt-3 text-sm text-purple-700",children:[(0,t.jsx)("strong",{children:"Mejor momento:"})," ",a.bestContactDay," a las ",a.bestContactTime]})]})]})]}),"ai"===z&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contenido Generado por IA"}),a.aiGeneratedEmail&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"\uD83D\uDCE7 Email"}),(0,t.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg border",children:(0,t.jsx)("div",{className:"whitespace-pre-wrap text-sm",children:a.aiGeneratedEmail})})]}),a.aiGeneratedScript&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"\uD83D\uDCDE Script de Llamada"}),(0,t.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg border",children:(0,t.jsx)("div",{className:"whitespace-pre-wrap text-sm",children:a.aiGeneratedScript})})]}),a.aiGeneratedComment&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"\uD83D\uDCAC Comentario CRM"}),(0,t.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg border",children:(0,t.jsx)("div",{className:"text-sm",children:a.aiGeneratedComment})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Mensaje Personalizado"}),j?(0,t.jsx)("textarea",{value:T.customMessage,onChange:e=>k({...T,customMessage:e.target.value}),placeholder:"Mensaje personalizado que sobrescribe el contenido de IA...",rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):(0,t.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:a.customMessage?(0,t.jsx)("div",{className:"whitespace-pre-wrap text-sm",children:a.customMessage}):(0,t.jsx)("p",{className:"text-gray-500 text-sm italic",children:"No hay mensaje personalizado"})})]})]}),"timeline"===z&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Timeline de la Tarea"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-100 rounded-full",children:(0,t.jsx)(c.A,{className:"w-4 h-4 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:"Tarea Creada"}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:new Date(a.createdAt).toLocaleString("es-ES")})]})]}),a.updatedAt!==a.createdAt&&(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"p-2 bg-yellow-100 rounded-full",children:(0,t.jsx)(m.A,{className:"w-4 h-4 text-yellow-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:"\xdaltima Actualizaci\xf3n"}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:new Date(a.updatedAt).toLocaleString("es-ES")})]})]}),a.approvedAt&&(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"p-2 bg-green-100 rounded-full",children:(0,t.jsx)(u.A,{className:"w-4 h-4 text-green-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:"Tarea Aprobada"}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:new Date(a.approvedAt).toLocaleString("es-ES")})]})]}),a.syncedAt&&(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"p-2 bg-purple-100 rounded-full",children:(0,t.jsx)(h.A,{className:"w-4 h-4 text-purple-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:"Sincronizada con HubSpot"}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:new Date(a.syncedAt).toLocaleString("es-ES")}),a.hubspotTaskId&&(0,t.jsxs)("div",{className:"text-xs text-gray-400",children:["ID: ",a.hubspotTaskId]})]})]}),a.status===l.e1.REJECTED&&a.rejectedReason&&(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"p-2 bg-red-100 rounded-full",children:(0,t.jsx)(P.A,{className:"w-4 h-4 text-red-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:"Tarea Rechazada"}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:a.rejectedReason})]})]}),a.syncError&&(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"p-2 bg-red-100 rounded-full",children:(0,t.jsx)(I.A,{className:"w-4 h-4 text-red-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:"Error de Sincronizaci\xf3n"}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:a.syncError})]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[(0,t.jsxs)("div",{className:"flex space-x-3",children:[a.status===l.e1.DRAFT&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:U,disabled:L,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:[(0,t.jsx)(u.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Aprobar"})]}),(0,t.jsxs)("button",{onClick:()=>R(!0),disabled:L,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors",children:[(0,t.jsx)(P.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Rechazar"})]})]}),a.status===l.e1.APPROVED&&!a.syncedToHubspot&&(0,t.jsxs)("button",{onClick:W,disabled:L,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[(0,t.jsx)(h.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Sincronizar"})]})]}),(0,t.jsx)("div",{className:"flex space-x-3",children:j?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>N(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),(0,t.jsxs)("button",{onClick:_,disabled:L,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[L&&(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,t.jsx)("span",{children:"Guardar"})]})]}):(0,t.jsx)("button",{onClick:n,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cerrar"})})]})]})}),M&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rechazar Tarea"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Por favor, proporciona una raz\xf3n para el rechazo:"}),(0,t.jsx)("textarea",{value:S,onChange:e=>O(e.target.value),placeholder:"Raz\xf3n del rechazo...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3 mt-4",children:[(0,t.jsx)("button",{onClick:()=>R(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),(0,t.jsx)("button",{onClick:F,disabled:!S.trim()||L,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors",children:"Rechazar"})]})]})})]})}var M=a(33109),R=a(53904);function L(e){let{isOpen:s,onClose:a,selectedTasks:i,onOptimize:c,onGenerateContent:x}=e,[m,u]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),[g,b]=(0,r.useState)("optimize"),[j,N]=(0,r.useState)(null),[A,k]=(0,r.useState)("email"),[S,D]=(0,r.useState)(null);if(!s)return null;let P=async()=>{if(0!==i.length){u(!0);try{let e=await c(i);p(e)}catch(e){console.error("Error optimizing tasks:",e)}finally{u(!1)}}},I=async(e,s)=>{u(!0);try{let a=await x(e,s);D(a)}catch(e){console.error("Error generating content:",e)}finally{u(!1)}},O=e=>e>=.8?"text-green-600":e>=.6?"text-yellow-600":e>=.4?"text-orange-600":"text-red-600";return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg text-white",children:(0,t.jsx)(o.A,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"AI Assistant"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[i.length," tarea",1!==i.length?"s":""," seleccionada",1!==i.length?"s":""]})]})]}),(0,t.jsx)("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,t.jsx)(w.A,{className:"w-6 h-6 text-gray-500"})})]}),(0,t.jsxs)("div",{className:"flex border-b border-gray-200",children:[(0,t.jsxs)("button",{onClick:()=>b("optimize"),className:"px-6 py-3 font-medium text-sm border-b-2 transition-colors ".concat("optimize"===g?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,t.jsx)(M.A,{className:"w-4 h-4 inline mr-2"}),"Optimizar Tareas"]}),(0,t.jsxs)("button",{onClick:()=>b("generate"),className:"px-6 py-3 font-medium text-sm border-b-2 transition-colors ".concat("generate"===g?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,t.jsx)(T.A,{className:"w-4 h-4 inline mr-2"}),"Generar Contenido"]}),(0,t.jsxs)("button",{onClick:()=>b("insights"),className:"px-6 py-3 font-medium text-sm border-b-2 transition-colors ".concat("insights"===g?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,t.jsx)(n.A,{className:"w-4 h-4 inline mr-2"}),"Insights"]})]}),(0,t.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:["optimize"===g&&(0,t.jsx)("div",{className:"space-y-6",children:h?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 p-6 rounded-lg border border-green-200",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,t.jsx)(T.A,{className:"w-6 h-6 text-green-600"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-green-900",children:"Resultados de Optimizaci\xf3n"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(h.optimizations.reduce((e,s)=>e+s.optimizedScore,0)/h.optimizations.length*100),"%"]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Probabilidad Promedio"})]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["+",Math.round(h.optimizations.reduce((e,s)=>e+(s.optimizedScore-s.originalScore),0)/h.optimizations.length*100),"%"]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Mejora Promedio"})]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg border",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:h.optimizations.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Tareas Optimizadas"})]})]})]}),(0,t.jsx)("div",{className:"space-y-4",children:h.optimizations.map((e,s)=>{let a=i.find(s=>s.id===e.taskId);return a?(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:a.subject}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[a.contactName," • ",a.companyName]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-lg font-bold ".concat(O(e.originalScore)),children:[Math.round(100*e.originalScore),"%"]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Original"})]}),(0,t.jsx)("div",{className:"text-gray-400",children:"→"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-lg font-bold ".concat(O(e.optimizedScore)),children:[Math.round(100*e.optimizedScore),"%"]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Optimizado"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Mejoras Sugeridas"}),(0,t.jsx)("ul",{className:"space-y-1",children:e.improvements.map((e,s)=>(0,t.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,t.jsx)("span",{className:"text-green-500 mr-2",children:"•"}),e]},s))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Contenido Optimizado"}),(0,t.jsxs)("div",{className:"space-y-2",children:[e.newContent.email&&(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded border",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Email"}),(0,t.jsxs)("div",{className:"text-sm",children:[e.newContent.email.substring(0,100),"..."]})]}),e.newContent.script&&(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded border",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Script"}),(0,t.jsxs)("div",{className:"text-sm",children:[e.newContent.script.substring(0,100),"..."]})]})]})]})]})]},e.taskId):null})})]}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(M.A,{className:"w-8 h-8 text-white"})}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Optimizar Tareas con IA"}),(0,t.jsx)("p",{className:"text-gray-600 max-w-md mx-auto",children:"Nuestra IA analizar\xe1 tus tareas seleccionadas y sugerir\xe1 mejoras para aumentar la probabilidad de \xe9xito."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,t.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[(0,t.jsx)(d.A,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),(0,t.jsx)("h4",{className:"font-medium text-purple-900",children:"Mensajes Optimizados"}),(0,t.jsx)("p",{className:"text-sm text-purple-700",children:"Mejora el contenido y el tono"})]}),(0,t.jsxs)("div",{className:"bg-pink-50 p-4 rounded-lg border border-pink-200",children:[(0,t.jsx)(C.A,{className:"w-6 h-6 text-pink-600 mx-auto mb-2"}),(0,t.jsx)("h4",{className:"font-medium text-pink-900",children:"Mejor Timing"}),(0,t.jsx)("p",{className:"text-sm text-pink-700",children:"Encuentra el momento ideal"})]}),(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[(0,t.jsx)(n.A,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),(0,t.jsx)("h4",{className:"font-medium text-blue-900",children:"Personalizaci\xf3n"}),(0,t.jsx)("p",{className:"text-sm text-blue-700",children:"Adapta seg\xfan el perfil"})]})]}),(0,t.jsxs)("button",{onClick:P,disabled:m||0===i.length,className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[m?(0,t.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):(0,t.jsx)(R.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:m?"Optimizando...":"Optimizar Tareas"})]})]})}),"generate"===g&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-lg border border-blue-200",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Generar Contenido para Tarea"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seleccionar Tarea"}),(0,t.jsxs)("select",{value:(null==j?void 0:j.id)||"",onChange:e=>N(i.find(s=>s.id===e.target.value)||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"Selecciona una tarea..."}),i.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.subject," - ",e.contactName]},e.id))]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Contenido"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,t.jsxs)("button",{onClick:()=>k("email"),className:"p-3 rounded-lg border-2 transition-all ".concat("email"===A?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"),children:[(0,t.jsx)(y.A,{className:"w-5 h-5 mx-auto mb-1"}),(0,t.jsx)("div",{className:"text-sm font-medium",children:"Email"})]}),(0,t.jsxs)("button",{onClick:()=>k("script"),className:"p-3 rounded-lg border-2 transition-all ".concat("script"===A?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"),children:[(0,t.jsx)(f.A,{className:"w-5 h-5 mx-auto mb-1"}),(0,t.jsx)("div",{className:"text-sm font-medium",children:"Script"})]}),(0,t.jsxs)("button",{onClick:()=>k("meeting"),className:"p-3 rounded-lg border-2 transition-all ".concat("meeting"===A?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"),children:[(0,t.jsx)(v.A,{className:"w-5 h-5 mx-auto mb-1"}),(0,t.jsx)("div",{className:"text-sm font-medium",children:"Reuni\xf3n"})]})]})]}),(0,t.jsxs)("button",{onClick:()=>j&&I(j,A),disabled:!j||m,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[m?(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):(0,t.jsx)(T.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:m?"Generando...":"Generar Contenido"})]})]}),S&&(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-4",children:"Contenido Generado"}),(0,t.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg border",children:(0,t.jsx)("div",{className:"whitespace-pre-wrap text-sm",children:S.content})}),S.tips&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Consejos de Optimizaci\xf3n"}),(0,t.jsx)("ul",{className:"space-y-1",children:S.tips.map((e,s)=>(0,t.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,t.jsx)("span",{className:"text-blue-500 mr-2",children:"\uD83D\uDCA1"}),e]},s))})]})]})]}),"insights"===g&&(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 p-6 rounded-lg border border-amber-200",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,t.jsx)(n.A,{className:"w-6 h-6 text-amber-600"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-amber-900",children:"Insights & Recomendaciones"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"An\xe1lisis de Rendimiento"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Tasa de \xc9xito Promedio"}),(0,t.jsxs)("span",{className:"font-medium text-green-600",children:[Math.round(i.reduce((e,s)=>e+(s.successProbability||0),0)/i.length*100),"%"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Mejor Tipo de Contacto"}),(0,t.jsx)("span",{className:"font-medium text-blue-600",children:i.filter(e=>e.type===l.wP.EMAIL).length>i.filter(e=>e.type===l.wP.CALL).length?"Email":"Llamada"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Prioridad Com\xfan"}),(0,t.jsx)("span",{className:"font-medium text-purple-600",children:i.filter(e=>"HIGH"===e.priority).length>i.length/2?"Alta":"Media"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Recomendaciones"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"p-3 bg-white rounded-lg border",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,t.jsx)(C.A,{className:"w-4 h-4 text-blue-500"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Timing \xd3ptimo"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Martes y mi\xe9rcoles entre 10:00-11:00 AM muestran mejores resultados"})]}),(0,t.jsxs)("div",{className:"p-3 bg-white rounded-lg border",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,t.jsx)(E.A,{className:"w-4 h-4 text-green-500"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Personalizaci\xf3n"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Mensajes personalizados aumentan 40% la tasa de respuesta"})]}),(0,t.jsxs)("div",{className:"p-3 bg-white rounded-lg border",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,t.jsx)(d.A,{className:"w-4 h-4 text-purple-500"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Seguimiento"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Considera un seguimiento despu\xe9s de 3-5 d\xedas sin respuesta"})]})]})]})]})]})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Potenciado por IA • Probabilidad de \xe9xito mejorada"}),(0,t.jsx)("button",{onClick:a,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cerrar"})]})]})})}let G=()=>{let{tasks:e,loading:s,error:a,pagination:l,filters:y,selectedTasks:f,createTask:v,updateTask:w,deleteTask:E,setFilters:A,setPage:C,refreshTasks:T,selectTask:k,deselectTask:D,selectAllTasks:P,deselectAllTasks:I,approveTask:M,rejectTask:R,syncToHubSpot:G,bulkAction:z,generateAISuggestions:H}=i(),[_,U]=(0,r.useState)(!1),[F,W]=(0,r.useState)(!1),[V,J]=(0,r.useState)(!1),[q,K]=(0,r.useState)(null),[B,Z]=(0,r.useState)(""),Q={total:e.length,draft:e.filter(e=>"PENDING"===e.status).length,approved:e.filter(e=>"APPROVED"===e.status).length,completed:e.filter(e=>"COMPLETED"===e.status).length,synced:e.filter(e=>"COMPLETED"===e.status).length,aiGenerated:e.filter(e=>"AI_GENERATED"===e.type).length},X=e=>{Z(e),A({...y,searchTerm:e})},$=e=>{switch(e){case"PENDING":default:return"text-gray-600 bg-gray-100";case"IN_PROGRESS":return"text-yellow-600 bg-yellow-100";case"APPROVED":return"text-green-600 bg-green-100";case"REJECTED":return"text-red-600 bg-red-100";case"COMPLETED":return"text-purple-600 bg-purple-100"}},Y=e=>{switch(e){case"LOW":return"text-blue-600";case"MEDIUM":return"text-yellow-600";case"HIGH":return"text-orange-600";case"URGENT":return"text-red-600";default:return"text-gray-600"}},ee=e=>{switch(e){case"MANUAL":default:return(0,t.jsx)(n.A,{className:"w-4 h-4"});case"AUTOMATED":return(0,t.jsx)(c.A,{className:"w-4 h-4"});case"TEMPLATE":return(0,t.jsx)(d.A,{className:"w-4 h-4"});case"AI_GENERATED":return(0,t.jsx)(o.A,{className:"w-4 h-4"})}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Task Management"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Gestiona y valida tareas antes de sincronizar con HubSpot"})]}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsxs)("button",{onClick:()=>J(!0),className:"flex items-center space-x-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-2 rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all",children:[(0,t.jsx)(o.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"AI Assistant"})]}),(0,t.jsxs)("button",{onClick:()=>U(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[(0,t.jsx)(x.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Nueva Tarea"})]})]})]})})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 mb-6",children:[(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Total"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:Q.total})]}),(0,t.jsx)(n.A,{className:"w-8 h-8 text-blue-500"})]})}),(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Borradores"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:Q.draft})]}),(0,t.jsx)(m.A,{className:"w-8 h-8 text-gray-500"})]})}),(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Aprobadas"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600",children:Q.approved})]}),(0,t.jsx)(u.A,{className:"w-8 h-8 text-green-500"})]})}),(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Completadas"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:Q.completed})]}),(0,t.jsx)(u.A,{className:"w-8 h-8 text-purple-500"})]})}),(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Sincronizadas"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:Q.synced})]}),(0,t.jsx)(h.A,{className:"w-8 h-8 text-blue-500"})]})}),(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"AI Generated"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:Q.aiGenerated})]}),(0,t.jsx)(o.A,{className:"w-8 h-8 text-purple-500"})]})})]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border mb-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[(0,t.jsx)("div",{className:"flex-1 max-w-lg",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(p.A,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Buscar tareas...",value:B,onChange:e=>X(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("button",{onClick:()=>W(!F),className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[(0,t.jsx)(g.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Filtros"})]}),(0,t.jsxs)("button",{onClick:T,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[(0,t.jsx)(b.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Actualizar"})]})]})]}),f.length>0&&(0,t.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"text-sm text-blue-700",children:[f.length," tareas seleccionadas"]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>z("approve"),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"Aprobar"}),(0,t.jsx)("button",{onClick:()=>z("sync"),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Sincronizar"}),(0,t.jsx)("button",{onClick:()=>z("delete"),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Eliminar"})]})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,t.jsx)("input",{type:"checkbox",checked:f.length===e.length&&e.length>0,onChange:e=>e.target.checked?P():I(),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarea"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contacto"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prioridad"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Programada"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"AI Score"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:9,className:"px-6 py-4 text-center text-gray-500",children:(0,t.jsxs)("div",{className:"flex justify-center items-center space-x-2",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),(0,t.jsx)("span",{children:"Cargando tareas..."})]})})}):0===e.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:9,className:"px-6 py-4 text-center text-gray-500",children:(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,t.jsx)(n.A,{className:"w-12 h-12 text-gray-300"}),(0,t.jsx)("span",{children:"No hay tareas creadas a\xfan"}),(0,t.jsx)("button",{onClick:()=>U(!0),className:"text-blue-600 hover:text-blue-800",children:"Crear primera tarea"})]})})}):e.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("input",{type:"checkbox",checked:f.includes(e.id),onChange:s=>s.target.checked?k(e.id):D(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"text-gray-400",children:ee(e.type)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.subject}),e.description&&(0,t.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.description})]})]})}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,t.jsx)("div",{className:"text-sm text-gray-900",children:e.contactName}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.contactEmail}),e.companyName&&(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.companyName})]}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e.type.replace("_"," ")})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"text-sm font-medium ".concat(Y(e.priority)),children:e.priority})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat($(e.status)),children:e.status.replace("_"," ")})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.scheduledDate&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:new Date(e.scheduledDate).toLocaleDateString()}),e.scheduledTime&&(0,t.jsx)("div",{className:"text-xs",children:e.scheduledTime})]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-12 bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full",style:{width:"".concat(50,"%")}})}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"50%"})]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("button",{onClick:()=>K(e),className:"text-blue-600 hover:text-blue-900",children:(0,t.jsx)(j.A,{className:"w-4 h-4"})}),"PENDING"===e.status&&(0,t.jsx)("button",{onClick:()=>M(e.id),className:"text-green-600 hover:text-green-900",children:(0,t.jsx)(u.A,{className:"w-4 h-4"})}),"APPROVED"===e.status&&(0,t.jsx)("button",{onClick:()=>G(e.id),className:"text-blue-600 hover:text-blue-900",children:(0,t.jsx)(h.A,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>E(e.id),className:"text-red-600 hover:text-red-900",children:(0,t.jsx)(N.A,{className:"w-4 h-4"})})]})})]},e.id))})]})}),l.pages>1&&(0,t.jsx)("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-700",children:["Mostrando ",(l.currentPage-1)*20+1," a"," ",Math.min(20*l.currentPage,l.total)," de ",l.total," tareas"]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>C(l.currentPage-1),disabled:1===l.currentPage,className:"px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50 disabled:opacity-50",children:"Anterior"}),(0,t.jsx)("button",{onClick:()=>C(l.currentPage+1),disabled:!l.hasMore,className:"px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50 disabled:opacity-50",children:"Siguiente"})]})]})})]})]}),q&&(0,t.jsx)(O,{task:q,isOpen:!!q,onClose:()=>K(null),onUpdate:async(e,s)=>{await w(e,s)},onApprove:M,onReject:R,onSync:G}),(0,t.jsx)(S,{isOpen:_,onClose:()=>U(!1),onCreate:v,onGenerateAI:H}),(0,t.jsx)(L,{isOpen:V,onClose:()=>J(!1),selectedTasks:e.filter(e=>f.includes(e.id)),onOptimize:async e=>({optimizations:e.map(e=>({taskId:e.id,originalScore:e.successProbability||.5,optimizedScore:Math.min(1,(e.successProbability||.5)+.2),improvements:["Personalizar saludo con informaci\xf3n de la empresa","Agregar call-to-action espec\xedfico","Optimizar hora de env\xedo basado en zona horaria"],newContent:{email:"Email optimizado con mejor personalizaci\xf3n...",script:"Script mejorado con t\xe9cnicas de persuasi\xf3n..."}})),suggestions:["Considera enviar emails los martes por la ma\xf1ana","Personaliza m\xe1s el mensaje usando datos de la empresa"],insights:["Tasa de respuesta promedio: 15%","Mejor d\xeda para contactar: Martes"]}),onGenerateContent:async(e,s)=>({content:({email:"Estimado/a ".concat(e.contactName,",\n\nEspero que se encuentre bien. He estado revisando la informaci\xf3n de ").concat(e.companyName," y me parece que podr\xedamos ayudarles a mejorar sus resultados.\n\n\xbfTendr\xeda disponibilidad para una breve llamada de 15 minutos la pr\xf3xima semana?\n\nSaludos cordiales,\n[Tu nombre]"),script:'1. Saludo personalizado: "Hola '.concat(e.contactName,', habla [tu nombre]"\n2. Prop\xf3sito: "Te contacto porque vi que ').concat(e.companyName,' podr\xeda beneficiarse de..."\n3. Pregunta abierta: "\xbfC\xf3mo est\xe1n manejando actualmente...?"\n4. Propuesta de valor: "En casos similares hemos logrado..."\n5. Pr\xf3ximo paso: "\xbfCu\xe1ndo podr\xedas dedicar 15 minutos para explorar esto?"'),meeting:"Reuni\xf3n con ".concat(e.contactName," - ").concat(e.companyName,"\n\nObjetivos:\n- Entender sus necesidades actuales\n- Presentar nuestra soluci\xf3n\n- Definir pr\xf3ximos pasos\n\nAgenda:\n1. Presentaciones (5 min)\n2. Situaci\xf3n actual (10 min)\n3. Nuestra propuesta (15 min)\n4. Q&A (10 min)\n5. Pr\xf3ximos pasos (5 min)")})[s]||"Contenido generado...",tips:["Personaliza el mensaje con datos espec\xedficos de la empresa","Mant\xe9n un tono profesional pero amigable","Incluye un call-to-action claro"]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[816,441,684,358],()=>s(87347)),_N_E=e.O()}]);